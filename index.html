<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Helldivers 2 — Damage Calculator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="logo">Super Calc</div>
    <nav class="tabs">
      <button class="tab active" data-tab="weapons">Weapon Data</button>
      <button class="tab" data-tab="enemies">Enemy Data</button>
      <button class="tab" data-tab="calculator">Damage Calculator</button>
    </nav>
  </header>

  <main>
    <section id="tab-weapons" class="panel">
      <div class="source-links hidden">
        <a href="https://helldivers.wiki.gg/wiki/Damage_Comparison"
          target="_blank"
          rel="noopener noreferrer">Source: Helldivers wiki</a>
        <a href="https://helldivers.wiki.gg/wiki/1.004.100"
          target="_blank"
          rel="noopener noreferrer">Patch: 1.004.100</a>
      </div>

      <div id="dataControls" class="data-controls">
        <select id="dataMode" class="select">
          <option value="onlineCsv" selected>Online (CSV)</option>
          <option value="file">Upload CSV/TSV</option>
        </select>
        <button class="button" id="reloadOnline">Reload</button>
        <button class="button" id="chooseFile">Choose File</button>
        <input type="file" id="fileInput" accept=".csv,.tsv,text/csv,text/tab-separated-values" class="hidden" />
        <span id="statusMsg" class="status"></span>
        <div id="loadingIndicator" class="loading-indicator hidden">
          <div class="spinner"></div>
          <span>Loading...</span>
        </div>
      </div>

      <div class="filters">
        <div class="row"><span class="label">Type:</span><div class="chiprow" id="typeFilters"></div></div>
        <div class="row"><span class="label">Sub:</span><div class="chiprow" id="subFilters"></div></div>
        <div class="row">
          <input class="input wide" id="search" placeholder="Search weapons… (matches any field)" />
          <button class="button" id="resetSort">Reset sort</button>
          <span id="testBadge" class="test-badge"></span>
        </div>
      </div>

      <div class="table-wrap">
        <table id="weaponsTable"><thead id="thead"></thead><tbody id="tbody"></tbody></table>
      </div>
    </section>

    <section id="tab-enemies" class="panel hidden">
      <div class="source-links hidden">
        <a href="https://helldivers.wiki.gg/wiki/Enemies"
          target="_blank"
          rel="noopener noreferrer">Source: Helldivers wiki</a>
        <a href="https://helldivers.wiki.gg/wiki/1.004.100"
          target="_blank"
          rel="noopener noreferrer">Patch: 1.004.100</a>
      </div>

      <div class="filters">
        <div class="row"><span class="label">Faction:</span><div class="chiprow" id="enemyFactionFilters"></div></div>
        <div class="row">
          <input class="input wide" id="enemySearch" placeholder="Search enemies… (matches any field)" />
          <button class="button" id="enemyResetSort">Reset sort</button>
          <span id="enemyStatusMsg" class="status"></span>
        </div>
      </div>

      <div class="table-wrap">
        <table id="enemyTable">
          <thead>
            <tr>
              <th>Unit</th>
              <th class="sortable" data-sort="zone_name">Zone Name</th>
              <th class="sortable" data-sort="health">Health</th>
              <th class="sortable" data-sort="Con">Con</th>
              <th class="sortable" data-sort="Dur%">Dur%</th>
              <th class="sortable" data-sort="AV">AV</th>
              <th class="sortable" data-sort="IsFatal">IsFatal</th>
              <th class="sortable" data-sort="ExTarget">ExTarget</th>
              <th class="sortable" data-sort="ExMult">ExMult</th>
              <th class="sortable" data-sort="ToMain%">ToMain%</th>
              <th class="sortable" data-sort="MainCap">MainCap</th>
            </tr>
          </thead>
          <tbody id="enemyTableBody"></tbody>
        </table>
      </div>
    </section>


    <section id="tab-calculator" class="panel hidden"><div class="filters"><div class="row"><span class="label">Damage Calculator</span></div></div><div class="placeholder">Coming soon :3</div></section>

    </main>

  <script type="module" src="app.js"></script>
</body>
</html>
